{
	"info": {
		"_postman_id": "91e66b94-c168-4c00-a44c-1fb83e6911ee",
		"name": "Social Media App",
		"description": "Flow (Akış)\n\n1. AUTH → **Signup**\n    \n2. AUTH → **Login** → (Tests: `{{accessToken}}` set edilir)\n    \n3. USERS/POSTS/COMMENTS/LIKES → token gerektiren işlemler\n    \n4. AUTH → **Logout** → (Tests: `{{accessToken}}` unset)\n    \n\n### Sık Kullanılan Değişkenler\n\n- `{{baseUrl}}` = [http://localhost:8080](http://localhost:8080)\n    \n- `{{accessToken}}` = Login sonrası Tests’ten doldurulur\n    \n- (Opsiyonel) `{{adminAccessToken}}` = Admin login sonrası\n    \n- Diğer değişkenler,`{{userId}}, {{postId}}, {{commentId}}`\n    \n\n### Environtment' a Başlangıçta Eklenen Tüm Değişkenler\n\n\\-tokenExpiresAt(value : boş)  \n\\-accessToken(value : boş)  \n\\-adminAccessToken(value : boş)  \n\\-baseUrl([http://localhost:8080](http://localhost:8080))  \n\\-userId(value : boş)",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "29650754"
	},
	"item": [
		{
			"name": "Admin",
			"item": [
				{
					"name": "Delete User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"let j = {}; try { j = pm.response.json() || {}; } catch(e){}\r",
									"const token = j.accessToken || j.data?.accessToken || j.token;\r",
									"if (token) pm.environment.set(\"adminAccessToken\", token);\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "apikey",
							"apikey": [
								{
									"key": "value",
									"value": "{{adminAccessToken}}",
									"type": "string"
								},
								{
									"key": "key",
									"value": "Access-Token",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/admin/users/{{userId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"admin",
								"users",
								"{{userId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Post",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"204\", () => pm.expect(pm.response.code).to.be.oneOf([200,204]));"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "apikey",
							"apikey": [
								{
									"key": "value",
									"value": "{{adminAccessToken}}",
									"type": "string"
								},
								{
									"key": "key",
									"value": "Access-Token",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/posts/{{postId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"posts",
								"{{postId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Comment",
					"request": {
						"auth": {
							"type": "apikey",
							"apikey": [
								{
									"key": "value",
									"value": "{{adminAccessToken}}",
									"type": "string"
								},
								{
									"key": "key",
									"value": "Access-Token",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/comments/{{commentId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"comments",
								"{{commentId}}"
							]
						}
					},
					"response": []
				}
			],
			"auth": {
				"type": "apikey",
				"apikey": [
					{
						"key": "key",
						"value": "Access-Token",
						"type": "string"
					},
					{
						"key": "in",
						"value": "header",
						"type": "string"
					},
					{
						"key": "value",
						"value": "{{adminAccessToken}}",
						"type": "string"
					}
				]
			},
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Auth",
			"item": [
				{
					"name": "Login (User)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Login status is 200\", () => pm.response.code === 200);\r",
									"\r",
									"if (pm.response.code === 200) {\r",
									"  const j = pm.response.json();\r",
									"  pm.environment.set(\"accessToken\", j.accessToken);\r",
									"  pm.environment.set(\"userId\", j.userId);\r",
									"  pm.environment.set(\"tokenExpiresAt\", j.tokenExpiresAt);\r",
									"} else {\r",
									"  pm.environment.unset(\"accessToken\");\r",
									"  pm.environment.unset(\"userId\");\r",
									"  pm.environment.unset(\"tokenExpiresAt\");\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{ \"username\": \"mustafa\", \"password\": \"mustafa\" }",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/login",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "Signup",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"username\": \"mustafa\",\r\n  \"password\": \"mustafa\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/signup",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"signup"
							]
						}
					},
					"response": []
				},
				{
					"name": "Logout",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/auth/logout",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"logout"
							]
						}
					},
					"response": []
				},
				{
					"name": "Me Info",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/auth/me",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"me"
							]
						}
					},
					"response": []
				},
				{
					"name": "Login (Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"200\", () => pm.response.code === 200);\r",
									"\r",
									"let j = {};\r",
									"try { j = pm.response.json() || {}; } catch(e){}\r",
									"\r",
									"const token = j.accessToken || j.data?.accessToken || j.token;\r",
									"if (token) {\r",
									"  pm.environment.set(\"adminAccessToken\", token);\r",
									"  // İstersen aktif token’ı da admin yap:\r",
									"   pm.environment.set(\"accessToken\", token);\r",
									"}\r",
									"\r",
									"const uid = j.user?.id || j.data?.user?.id || j.id;\r",
									"if (uid) pm.environment.set(\"userId\", uid);\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-Access-Token",
								"value": "{{adminAccessToken}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \"username\": \"admin\", \"password\": \"admin123\" }",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/login",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						}
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Users",
			"item": [
				{
					"name": "Info with UserId",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/users/{{userId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"users",
								"{{userId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Change Password",
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{ \"currentPassword\": \"zeynep\", \"newPassword\": \"zeynep123\" }\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/users/me/password",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"users",
								"me",
								"password"
							]
						}
					},
					"response": []
				},
				{
					"name": "Me",
					"request": {
						"auth": {
							"type": "apikey",
							"apikey": [
								{
									"key": "value",
									"value": "{{accessToken}}",
									"type": "string"
								},
								{
									"key": "key",
									"value": "Access-Token",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/users/me",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"users",
								"me"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Posts",
			"item": [
				{
					"name": "Comments",
					"item": [
						{
							"name": "Add Comment",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"201/200\", () => pm.expect(pm.response.code).to.be.oneOf([200,201]));\r",
											"const j = pm.response.json();\r",
											"if (j && j.id) pm.environment.set(\"commentId\", j.id);\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{ \"text\": \"muhteşemm\"}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/api/posts/{{postId}}/comments",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"posts",
										"{{postId}}",
										"comments"
									]
								}
							},
							"response": []
						},
						{
							"name": "List Comment",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"200\", () => pm.response.to.have.status(200));\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/api/posts/{{postId}}/comments",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"posts",
										"{{postId}}",
										"comments"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete Comment",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"204\", () => pm.expect(pm.response.code).to.be.oneOf([200,204]));\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/api/comments/{{commentId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"comments",
										"{{commentId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Likes",
					"item": [
						{
							"name": "Like Post",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"201/200\", () => pm.expect(pm.response.code).to.be.oneOf([200,201]));\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/api/posts/{{postId}}/likes",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"posts",
										"{{postId}}",
										"likes"
									]
								}
							},
							"response": []
						},
						{
							"name": "Unlike Post",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"204\", () => pm.expect(pm.response.code).to.be.oneOf([200,204]));\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "apikey",
									"apikey": [
										{
											"key": "value",
											"value": "{{accessToken}}",
											"type": "string"
										},
										{
											"key": "key",
											"value": "Access-Token",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Access-Token",
										"value": "{{accessToken}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/api/posts/{{postId}}/likes",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"posts",
										"{{postId}}",
										"likes"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Create Post",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"201/200\", () => pm.expect(pm.response.code).to.be.oneOf([200,201]));\r",
									"const j = pm.response.json();\r",
									"if (j && j.id) pm.environment.set(\"postId\", j.id);\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"imageUrl\": \"https://picsum.photos/seed/ikinci-post/800/600\",\r\n  \"caption\": \"ikinci postum!\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/posts",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"posts"
							]
						}
					},
					"response": []
				},
				{
					"name": "List Posts",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"200\", () => pm.response.to.have.status(200));\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/posts",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"posts"
							]
						}
					},
					"response": []
				},
				{
					"name": "View Post",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"200\", () => pm.response.to.have.status(200));\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/posts/{{postId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"posts",
								"{{postId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Post(User/Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"200\", () => pm.response.to.have.status(200));\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"imageUrl\": \"https://picsum.photos/seed/ayse2/800/600\",\r\n  \"caption\": \"ilk post güncellemesi\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/posts/{{postId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"posts",
								"{{postId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Post (user/admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"204\", () => pm.expect(pm.response.code).to.be.oneOf([200,204]));\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/posts/{{postId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"posts",
								"{{postId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Görüntüleme (View)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"200\", () => pm.response.to.have.status(200));\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/posts/{{postId}}/view",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"posts",
								"{{postId}}",
								"view"
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"auth": {
		"type": "apikey",
		"apikey": [
			{
				"key": "value",
				"value": "{{accessToken}}",
				"type": "string"
			},
			{
				"key": "key",
				"value": "Access-Token",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "accessToken",
			"value": ""
		},
		{
			"key": "tokenExpiresAt",
			"value": ""
		},
		{
			"key": "adminAccessToken",
			"value": ""
		},
		{
			"key": "userId",
			"value": ""
		},
		{
			"key": "baseUrl",
			"value": ""
		}
	]
}